# 3CORS Service - Frontend (both domain variants)
# Use http:// prefix to prevent automatic HTTPS redirect (Cloudflare Tunnel handles SSL)

# Primary domain
http://3cors-service.hcai42.com {
    # Request body size limit (10MB)
    request_body {
        max_size 10MB
    }

    # Proxy to 3cors-frontend container
    reverse_proxy 3cors-frontend:8080 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-Proto https
        header_up X-Forwarded-Host {host}
        # WebSocket support
        header_up Connection "upgrade"
        header_up Upgrade "websocket"
    }
}

# Alternative domain with 'l' suffix (if configured in Cloudflare)
http://3cors-servicel.hcai42.com {
    # Request body size limit (10MB)
    request_body {
        max_size 10MB
    }

    # Proxy to 3cors-frontend container
    reverse_proxy 3cors-frontend:8080 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-Proto https
        header_up X-Forwarded-Host {host}
        # WebSocket support
        header_up Connection "upgrade"
        header_up Upgrade "websocket"
    }
}
